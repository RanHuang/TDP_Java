<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
	body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=6fxrcT02udnTGlLTGwibD1y03BcwyNYg"></script>
	<title>地图展示</title>
</head>
<body>
	<div id="allmap"></div>
</body>
</html>
<script type="text/javascript">
	// 定义自定义覆盖物的构造函数  
	function SquareOverlay(center, length, color){    
		this._center = center;    
		this._length = length;    
		this._color = color;    
	}    
	// 继承API的BMap.Overlay    
	SquareOverlay.prototype = new BMap.Overlay();
	// 实现初始化方法  
	SquareOverlay.prototype.initialize = function(map){    
		// 保存map对象实例   
		this._map = map;        
		// 创建div元素，作为自定义覆盖物的容器   
		var div = document.createElement("div");    
		div.style.position = "absolute";        
		// 可以根据参数设置元素外观   
		div.style.width = this._length + "px";    
		div.style.height = this._length + "px";    
		div.style.background = this._color;      
		// 将div添加到覆盖物容器中   
		map.getPanes().markerPane.appendChild(div);      
		// 保存div实例   
		this._div = div;      
		// 需要将div元素作为方法的返回值，当调用该覆盖物的show、   
		// hide方法，或者对覆盖物进行移除时，API都将操作此元素。   
		return div;    
	}
	// 实现绘制方法   
	SquareOverlay.prototype.draw = function(){    
		// 根据地理坐标转换为像素坐标，并设置给容器    
		var position = this._map.pointToOverlayPixel(this._center);    
		this._div.style.left = position.x - this._length / 2 + "px";    
		this._div.style.top = position.y - this._length / 2 + "px";    
	}
	// 实现显示方法    
	SquareOverlay.prototype.show = function(){    
		if (this._div){    
			this._div.style.display = "";    
		}    
	}      
	// 实现隐藏方法  
	SquareOverlay.prototype.hide = function(){    
		if (this._div){    
			this._div.style.display = "none";    
		}    
	}
	// 添加自定义方法   
	SquareOverlay.prototype.toggle = function(){    
		if (this._div){    
			if (this._div.style.display == ""){    
				this.hide();    
			}else {    
				this.show();    
			}    
		}    
	}
	
	var colorGreen = ["#99ff33", "#88ff33", "#77ff33", "#66ff33", "#55ff33", "#44ff33", "#33ff33", "#22ff33", "#11ff33", "#00ff33"];
	var colorYellow = ["#ffffcc", "#ffffaa", "#ffff99", "#ffff88", "#ffff77", "#ffff66", "#ffff55", "#ffff44", "#ffff33", "#ffff22"];
	var colorBlue = ["#0099ff", "#0088ff", "#0077ff", "#0066ff", "#0055ff", "#0044ff", "#0033ff", "#0022ff", "#0011ff", "#0000ff"];
	var colorRed = ["#ff9999", "#ff9933", "#ff9900", "#ff6633", "#ff6600", "#ff3366", "#ff3333", "#ff3300", "#ff0033", "#ff0000"];
	
	var myColor = ["#ffff66","#0099ff", "#0088ff", "#0077ff", "#0066ff", "#0055ff", "#0044ff", "#0033ff", "#0022ff", "#0011ff", "#ff999f", "#ff9933", "#ff9900", "#ff6633", "#ff6600", "#ff3366", "#ff3333", "#ff3300", "#ff0033", "#ff0000", "#222222"];
	
	function addMarkerSquareColor(point, noiseLevel){  // 创建图标对象   
		// 添加自定义覆盖物   
		map.centerAndZoom(point, 17); 
		var level = Math.round(noiseLevel);
		var markColor;
		if(level<=40){
			markColor = myColor[0];
		}else if(level>=60){
			markColor = myColor[20];
		}else{
			markColor = myColor[level-40];
		}
		var marker = new SquareOverlay(map.getCenter(), 10, markColor); 
		map.addOverlay(marker);  
	}    
	
	// 百度地图API功能
	var map = new BMap.Map("allmap");    // 创建Map实例
	map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
	map.setCurrentCity("西安");          // 设置地图显示的城市 此项是必须设置的
	map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
//All in evening	
//var arrayLongitude = [108.988162, 108.987137, 108.986972, 108.986248, 108.987233, 108.98773, 108.988987, 108.989738, 108.990061, 108.991584, 108.992529, 108.993536, 108.992817, 108.99235, 108.99095, 108.989842, 108.986832, 108.989929, 108.991107, 108.987907, 108.989028, 108.989482, 108.990683, 108.991207, 108.991912, 108.992688, 108.993326, 108.993788, 108.99308, 108.992485, 108.991569, 108.991155, 108.990251, 108.990259, 108.99131, 108.991839, 108.991398, 108.990284, 108.989886, 108.988628, 108.989032, 108.988878, 108.988125, 108.987281, 108.987672, 108.989874, 108.990533, 108.991438, 108.992626, 108.993525, 108.992357, 108.992861, 108.993289, 108.993938, 108.993633, 108.993737, 108.992665, 108.991566, 108.990859, 108.990281, 108.989544, 108.989564, 108.988529, 108.986347, 108.988617, 108.988499];
//var arrayLatitude = [34.249061, 34.248603, 34.248125, 34.247791, 34.247732, 34.247863, 34.248508, 34.248465, 34.247878, 34.247984, 34.248195, 34.248513, 34.249581, 34.250216, 34.249908, 34.249623, 34.257081, 34.249728, 34.250932, 34.257074, 34.255766, 34.255862, 34.255665, 34.25544, 34.255221, 34.255191, 34.254997, 34.25606, 34.255734, 34.256108, 34.254838, 34.254605, 34.254891, 34.255444, 34.255664, 34.25648, 34.256649, 34.256673, 34.256462, 34.25566, 34.255021, 34.254134, 34.254144, 34.254061, 34.255206, 34.254588, 34.25405, 34.253975, 34.253873, 34.253343, 34.252843, 34.25277, 34.252113, 34.251528, 34.25011, 34.250268, 34.250566, 34.251188, 34.252841, 34.252182, 34.252651, 34.251594, 34.251552, 34.251567, 34.251081, 34.249832];
//var arrayNoiseLevel = [41.831146267556946, 55.966995438101705, 44.77072273523948, 52.204679894291566, 50.46261709247575, 45.846319744981685, 42.92654907496928, 50.583007331346735, 49.67054500118965, 52.95927232135554, 48.922602033334044, 43.77220327405511, 46.5961150141619, 42.16698395976895, 44.452957835741806, 42.685525953155484, 50.57036115212792, 41.019274069172184, 42.88885317329279, 53.17445821923984, 36.66934390639464, 40.622655429748875, 37.279859166292546, 35.89704871285199, 49.97426095935098, 39.49517045808053, 41.27949915938719, 46.27515570088, 39.27057676839839, 44.162562757233395, 40.22185583644739, 38.020086954191754, 40.60465807364007, 39.10594773806897, 37.200606573081494, 52.037735353610245, 46.37971794632349, 54.34566081283898, 44.967551942690974, 45.28776291358482, 36.51154514360198, 40.379863606866785, 36.11152050276744, 41.05622555775926, 41.79979371765547, 37.60881154072361, 37.19529627860405, 55.49085347248593, 42.49832837552037, 42.33600893817512, 46.55602611451453, 42.322601620748735, 44.73580392635564, 53.722814109958975, 43.86073287065476, 43.97037165917719, 45.87128131589992, 47.99878550811893, 39.67468046634955, 43.66446886110342, 40.44874331758479, 40.65365853090953, 43.83833402450997, 42.85544216800002, 41.982911027013806, 41.5853418755936];

var arrayLongitude = [108.988162, 108.986248, 108.987233, 108.98773, 108.990061, 108.992529, 108.993536, 108.99235, 108.991205, 108.99171, 108.991796, 108.991773, 108.990651, 108.989713, 108.989038, 108.988527, 108.988597, 108.989929, 108.988628, 108.989032, 108.988878, 108.988125, 108.987281, 108.987672, 108.989874, 108.990533, 108.991438, 108.992626, 108.993525, 108.992357, 108.992861, 108.993289, 108.993938, 108.993633, 108.993737, 108.992665, 108.991566, 108.990859, 108.990281, 108.989544, 108.989564, 108.988529, 108.986347, 108.988617, 108.988499];
var arrayLatitude = [34.249061, 34.247791, 34.247732, 34.247863, 34.247878, 34.248195, 34.248513, 34.250216, 34.250914, 34.251527, 34.2527, 34.253795, 34.254551, 34.254553, 34.254629, 34.255141, 34.256198, 34.249728, 34.25566, 34.255021, 34.254134, 34.254144, 34.254061, 34.255206, 34.254588, 34.25405, 34.253975, 34.253873, 34.253343, 34.252843, 34.25277, 34.252113, 34.251528, 34.25011, 34.250268, 34.250566, 34.251188, 34.252841, 34.252182, 34.252651, 34.251594, 34.251552, 34.251567, 34.251081, 34.249832];
var arrayNoiseLevel = [41.831146267556946, 52.204679894291566, 50.46261709247575, 45.846319744981685, 49.67054500118965, 48.922602033334044, 43.77220327405511, 42.16698395976895, 44.490672042438995, 45.62960916692668, 43.72219939039967, 52.90284884830577, 38.38535068879248, 37.68558036974157, 38.94204718848217, 42.58638619968063, 47.1890575980862, 41.019274069172184, 45.28776291358482, 36.51154514360198, 40.379863606866785, 36.11152050276744, 41.05622555775926, 41.79979371765547, 37.60881154072361, 37.19529627860405, 55.49085347248593, 42.49832837552037, 42.33600893817512, 46.55602611451453, 42.322601620748735, 44.73580392635564, 53.722814109958975, 43.86073287065476, 43.97037165917719, 45.87128131589992, 47.99878550811893, 39.67468046634955, 43.66446886110342, 40.44874331758479, 40.65365853090953, 43.83833402450997, 42.85544216800002, 41.982911027013806, 41.5853418755936];

	for(var i=0; i<arrayNoiseLevel.length; i++){
		addMarkerSquareColor(new BMap.Point(arrayLongitude[i], arrayLatitude[i]), arrayNoiseLevel[i]);
	}
	
	map.centerAndZoom(new BMap.Point(108.990217, 34.25222), 17);  // 将地图中心设置为校园中
	
</script>